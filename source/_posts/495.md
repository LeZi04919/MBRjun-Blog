---
title: GPU-PV 配置教程 Arch 篇
date: 2023-10-13 00:07:00
updated: 2023-10-13 00:07:00
categories: 教程
tags:
- Hyper-V
- Linux
- GPU-PV
thumbnailImage: https://cos.mbrjun.cn/IMGS/2023/10/13/5caf7f4c-0f91-4481-9fb5-ae5c4398bd33.webp
---
在 Arch Linux 虚拟机配置 GPU-PV 以使用 3D 加速和 CUDA 等功能  

这里就不再过多介绍 GPU-PV 了，有需要的可以 Google 一下，基本上就是允许多个虚拟机和物理机一起共用 GPU 资源，类似 SR-IOV  

<!-- more -->

---

{% alert warning %}
本文仅适用于 Arch Linux 和其他基于 Arch Linux 的发行版，包括：  
  - Manjaro
  - SteamOS

请**不要**在以下发行版使用：  
  - Ubuntu
  - Debian
  - CentOS
{% endalert %}

{% alert info %}
为了确保能正常使用 SSH，建议配置静态 IP 或静态 DHCP  
{% endalert %}

---

## 目录
- [安装系统](#安装系统)
- [移除 vGPU](#移除-vGPU)
- [安装 sshd](#安装-sshd)
- [安装 Arch WSL](#安装-Arch-WSL)

## 安装系统
先安装配置好系统，如果已经安装过了就忽略这一步  

## 移除 vGPU
如果你之前已经添加了 GPU-PV 适配器，但是无法正常使用，先移除掉 vGPU：  

- （需要管理员权限）在宿主机 PowerShell 执行：  
{% tabbed_codeblock %}
    <!-- tab pwsh -->
        Remove-VMGpuPartitionAdapter -VMName "虚拟机名称"
    <!-- endtab -->
{% endtabbed_codeblock %}

## 安装 sshd
需要允许 ``root`` 登录，配置过了就跳过这一步。  

- 在虚拟机执行：
{% tabbed_codeblock %}
    <!-- tab sh -->
        sudo pacman -Sy openssh
        sudo echo "PermitRootLogin yes" >> /etc/ssh/sshd_config
        # or PubKey login only: sudo echo "PermitRootLogin prohibit-password" >> /etc/ssh/sshd_config
        sudo systemctl enable --now sshd
    <!-- endtab -->
{% endtabbed_codeblock %}

## 安装 Arch WSL
